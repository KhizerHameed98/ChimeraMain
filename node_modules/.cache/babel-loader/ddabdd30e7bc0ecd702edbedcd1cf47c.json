{"ast":null,"code":"var _jsxFileName = \"/home/khizer/Documents/AllData/chimera-react-frontend/chimeraMain/src/pages/CreateDigitalArt.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Header from \"../partials/Header\";\nimport Footer from \"../partials/Footer\";\nimport axios from \"axios\";\nimport Web3 from \"web3\";\nimport \"../partials/Loader\";\nimport Swal from \"sweetalert2\";\nimport { useToasts } from \"react-toast-notifications\";\nimport ImageUploader from \"react-images-upload\";\nimport \"../css/upload.css\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport config from \"../config\";\nimport Loader from \"../partials/Loader\";\n\nconst chimeraContract = require(\"../contracts/Chimera.json\");\n\nconst SMAV2Contract = require(\"../contracts/SuperRareMarketAuctionV2.json\");\n\nlet web3;\nlet accounts;\nlet chimera;\nlet SMAV2;\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: \"100%\",\n    \"& > * + *\": {\n      marginTop: theme.spacing(2)\n    }\n  }\n}));\n\nfunction CreateDigitalArt() {\n  const classes = useStyles();\n  const size = 7242880;\n  const [imageFile, setImageFile] = useState(null);\n  const [error, setError] = useState({\n    sizeError: false,\n    formatError: false\n  });\n  const [description, setDescription] = useState(\"\");\n  const [tokenName, setTokenName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  function OnChangeTokenName(e) {\n    setTokenName(e.target.value);\n  }\n\n  function OnChangeDescription(e) {\n    setDescription(e.target.value);\n  }\n\n  function onChangeImageFile(e) {\n    // setImageFile(e[0]);\n    setError({\n      sizeError: false\n    });\n    setError({\n      formatError: false\n    });\n    console.log(e[0]);\n\n    if (e[0]) {\n      if (e[0].size < size) {\n        let imageName = e[0].name;\n        let splitName = imageName.split(\".\");\n\n        if (splitName[1] === \"png\" || splitName[1] === \"jpg\" || splitName[1] === \"jpeg\" || splitName[1] === \"JPEG\") {\n          setImageFile(e[0]);\n        } else {\n          setError({\n            formatError: true\n          });\n          setImageFile(null);\n        }\n      } else {\n        setError({\n          sizeError: true\n        });\n      }\n    }\n  }\n\n  function validateForm() {\n    return description.length > 0 && tokenName.length > 0 && imageFile;\n  }\n\n  async function SubmitForm() {\n    if (!window.ethereum) {\n      alert(\"Please Install metamask!!\");\n    } else {\n      let tokenId;\n      web3 = new Web3(window.ethereum);\n      await window.ethereum.enable();\n      setLoading(true);\n      accounts = await web3.eth.getAccounts();\n      chimera = await new web3.eth.Contract(chimeraContract.abi, config.Chimera);\n\n      try {\n        tokenId = await chimera.methods.totalSupply().call();\n      } catch (error) {\n        setLoading(false);\n        console.log(error);\n        Swal.fire({\n          icon: \"error\",\n          title: \"Oops...\",\n          text: \"Something went wrong!\"\n        });\n      }\n\n      let formData = new FormData();\n      formData.append(\"file\", imageFile);\n      formData.append(\"tokenId\", tokenId);\n      formData.append(\"name\", tokenName);\n      formData.append(\"owner\", accounts[0]);\n      formData.append(\"artist\", accounts[0]);\n      axios.post(`http://localhost:5000/upload-file`, formData).then(async res => {\n        console.log(res.data.message);\n\n        try {\n          await chimera.methods.addNewToken(description, 0).send({\n            from: accounts[0]\n          });\n          addToast(\"Successfully uploaded\", {\n            appearance: \"success\",\n            autoDismiss: true\n          });\n          setLoading(false);\n        } catch (error) {\n          setLoading(false);\n          console.log(error);\n          axios.post(`http://localhost:5000/delete/${tokenId}`).then(res => {\n            console.log(res);\n          });\n          Swal.fire({\n            icon: \"error\",\n            title: \"Oops...\",\n            text: \"Something went wrong!\"\n          });\n        }\n      }).catch(err => {\n        setLoading(false);\n        console.log(err);\n        Swal.fire({\n          icon: \"error\",\n          title: \"Oops...\",\n          text: \"Something went wrong!\"\n        });\n      });\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col min-h-screen overflow-hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"max-w-8xl  text-center mt-32 mx-auto px-4 sm:px-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \" gridsm:grid-cols-12 gap-8 py-20 md:py-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"font-extrabold text-black\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, \"Create Digital Art\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"max-w-8xl  text-center mt-5 mx-auto px-4 sm:px-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"min-w-screen min-h-screen font-Inter font-extrabold   flex flex-col items-center justify-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"w-5/6  lg:w-3/6 rounded-xl shadow-2xl bg-gradient-to-b from-blue-600 to-blue-400 mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"flex flex-col shadow-2xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"header\",\n    class: \"flex flex-col items-center justify-center text-white py-4 bg-blue-800\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"text-center \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-3xl font-black \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 23\n    }\n  }, \"Digital Art\"))), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"converters-area\",\n    class: \"px-4 py-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"flex flex-col text-left mt-5 text-white px-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    class: \"mb-1\",\n    for: \"weight-kilograms\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 23\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"description\",\n    placeholder: \"Enter your Token Name here!\",\n    class: \"py-2  px-2 rounded focus:outline-none text-gray-600 focus:text-gray-600\",\n    onChange: OnChangeTokenName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"flex flex-col text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"flex flex-col rounded-6xl mt-5 text-left px-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    class: \"mb-1\",\n    for: \"weight-kilograms\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 25\n    }\n  }, \"About your Token\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: OnChangeDescription,\n    type: \"text\",\n    id: \"description\",\n    placeholder: \"Description\",\n    className: \"pb-40 pt-3 px-2 rounded focus:outline-none text-gray-600 focus:text-gray-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(ImageUploader, {\n    className: \"mt-5\",\n    withIcon: true,\n    withLabel: true,\n    buttonText: \"Choose image\",\n    maxFileSize: 7242880,\n    imgExtension: [\".jpg\", \".gif\", \".png\", \".gif\", \".jpeg\", \".JPEG\"],\n    withPreview: true,\n    singleImage: true,\n    onChange: onChangeImageFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 23\n    }\n  }, error.sizeError ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 29\n    }\n  }, \"Size should be less than 5mb\")) : null, error.formatError ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 29\n    }\n  }, \"Format should be .jpg,png,jpeg,JPEG\")) : null), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"flex mt-5 flex-col text-center px-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-danger font-bold  py-2\",\n    disabled: !validateForm(),\n    onClick: SubmitForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 25\n    }\n  }, \"Submit\"))))))), loading ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 17\n    }\n  }), \" \") : null)), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default CreateDigitalArt;","map":{"version":3,"sources":["/home/khizer/Documents/AllData/chimera-react-frontend/chimeraMain/src/pages/CreateDigitalArt.js"],"names":["React","useState","useEffect","Header","Footer","axios","Web3","Swal","useToasts","ImageUploader","makeStyles","Alert","config","Loader","chimeraContract","require","SMAV2Contract","web3","accounts","chimera","SMAV2","useStyles","theme","root","width","marginTop","spacing","CreateDigitalArt","classes","size","imageFile","setImageFile","error","setError","sizeError","formatError","description","setDescription","tokenName","setTokenName","loading","setLoading","OnChangeTokenName","e","target","value","OnChangeDescription","onChangeImageFile","console","log","imageName","name","splitName","split","validateForm","length","SubmitForm","window","ethereum","alert","tokenId","enable","eth","getAccounts","Contract","abi","Chimera","methods","totalSupply","call","fire","icon","title","text","formData","FormData","append","post","then","res","data","message","addNewToken","send","from","addToast","appearance","autoDismiss","catch","err"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Header from \"../partials/Header\";\nimport Footer from \"../partials/Footer\";\nimport axios from \"axios\";\nimport Web3 from \"web3\";\nimport \"../partials/Loader\";\nimport Swal from \"sweetalert2\";\nimport { useToasts } from \"react-toast-notifications\";\n\nimport ImageUploader from \"react-images-upload\";\nimport \"../css/upload.css\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport config from \"../config\";\nimport Loader from \"../partials/Loader\";\n\nconst chimeraContract = require(\"../contracts/Chimera.json\");\nconst SMAV2Contract = require(\"../contracts/SuperRareMarketAuctionV2.json\");\nlet web3;\nlet accounts;\nlet chimera;\nlet SMAV2;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    \"& > * + *\": {\n      marginTop: theme.spacing(2),\n    },\n  },\n}));\n\nfunction CreateDigitalArt() {\n  const classes = useStyles();\n  const size = 7242880;\n\n  const [imageFile, setImageFile] = useState(null);\n  const [error, setError] = useState({\n    sizeError: false,\n    formatError: false,\n  });\n  const [description, setDescription] = useState(\"\");\n  const [tokenName, setTokenName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  function OnChangeTokenName(e) {\n    setTokenName(e.target.value);\n  }\n  function OnChangeDescription(e) {\n    setDescription(e.target.value);\n  }\n\n  function onChangeImageFile(e) {\n    // setImageFile(e[0]);\n    setError({ sizeError: false });\n    setError({ formatError: false });\n    console.log(e[0]);\n\n    if (e[0]) {\n      if (e[0].size < size) {\n        let imageName = e[0].name;\n        let splitName = imageName.split(\".\");\n\n        if (\n          splitName[1] === \"png\" ||\n          splitName[1] === \"jpg\" ||\n          splitName[1] === \"jpeg\" ||\n          splitName[1] === \"JPEG\"\n        ) {\n          setImageFile(e[0]);\n        } else {\n          setError({ formatError: true });\n          setImageFile(null);\n        }\n      } else {\n        setError({ sizeError: true });\n      }\n    }\n  }\n  function validateForm() {\n    return description.length > 0 && tokenName.length > 0 && imageFile;\n  }\n  async function SubmitForm() {\n    if (!window.ethereum) {\n      alert(\"Please Install metamask!!\");\n    } else {\n      let tokenId;\n      web3 = new Web3(window.ethereum);\n      await window.ethereum.enable();\n      setLoading(true);\n      accounts = await web3.eth.getAccounts();\n      chimera = await new web3.eth.Contract(\n        chimeraContract.abi,\n        config.Chimera\n      );\n      try {\n        tokenId = await chimera.methods.totalSupply().call();\n      } catch (error) {\n        setLoading(false);\n        console.log(error);\n        Swal.fire({\n          icon: \"error\",\n          title: \"Oops...\",\n          text: \"Something went wrong!\",\n        });\n      }\n\n      let formData = new FormData();\n      formData.append(\"file\", imageFile);\n      formData.append(\"tokenId\", tokenId);\n      formData.append(\"name\", tokenName);\n      formData.append(\"owner\", accounts[0]);\n      formData.append(\"artist\", accounts[0]);\n\n      axios\n        .post(`http://localhost:5000/upload-file`, formData)\n        .then(async (res) => {\n          console.log(res.data.message);\n          try {\n            await chimera.methods\n              .addNewToken(description, 0)\n              .send({ from: accounts[0] });\n            addToast(\"Successfully uploaded\", {\n              appearance: \"success\",\n              autoDismiss: true,\n            });\n            setLoading(false);\n          } catch (error) {\n            setLoading(false);\n            console.log(error);\n            axios\n              .post(`http://localhost:5000/delete/${tokenId}`)\n              .then((res) => {\n                console.log(res);\n              });\n            Swal.fire({\n              icon: \"error\",\n              title: \"Oops...\",\n              text: \"Something went wrong!\",\n            });\n          }\n        })\n        .catch((err) => {\n          setLoading(false);\n          console.log(err);\n          Swal.fire({\n            icon: \"error\",\n            title: \"Oops...\",\n            text: \"Something went wrong!\",\n          });\n        });\n    }\n  }\n\n  return (\n    <>\n      <div className=\"flex flex-col min-h-screen overflow-hidden\">\n        <Header />\n        <div>\n          <div className=\"max-w-8xl  text-center mt-32 mx-auto px-4 sm:px-6\">\n            {/* Top area: Blocks */}\n            <div className=\" gridsm:grid-cols-12 gap-8 py-20 md:py-12\">\n              <h1 className=\"font-extrabold text-black\">Create Digital Art</h1>\n            </div>\n          </div>\n          <div className=\"max-w-8xl  text-center mt-5 mx-auto px-4 sm:px-6\">\n            {/* Top area: Blocks */}\n            {/*Form Start*/}\n            <div class=\"min-w-screen min-h-screen font-Inter font-extrabold   flex flex-col items-center justify-center\">\n              <div class=\"w-5/6  lg:w-3/6 rounded-xl shadow-2xl bg-gradient-to-b from-blue-600 to-blue-400 mr-3\">\n                <div class=\"flex flex-col shadow-2xl\">\n                  <div\n                    id=\"header\"\n                    class=\"flex flex-col items-center justify-center text-white py-4 bg-blue-800\"\n                  >\n                    <div class=\"text-center \">\n                      <span className=\"text-3xl font-black \">Digital Art</span>\n                    </div>\n                  </div>\n\n                  <div id=\"converters-area\" class=\"px-4 py-5\">\n                    <div class=\"flex flex-col text-left mt-5 text-white px-2\">\n                      <label class=\"mb-1\" for=\"weight-kilograms\">\n                        Name\n                      </label>\n                      <input\n                        type=\"text\"\n                        id=\"description\"\n                        placeholder=\"Enter your Token Name here!\"\n                        class=\"py-2  px-2 rounded focus:outline-none text-gray-600 focus:text-gray-600\"\n                        onChange={OnChangeTokenName}\n                      />\n                    </div>\n                    <div class=\"flex flex-col text-white\">\n                      <div class=\"flex flex-col rounded-6xl mt-5 text-left px-1\">\n                        <label class=\"mb-1\" for=\"weight-kilograms\">\n                          About your Token\n                        </label>\n                        <input\n                          onChange={OnChangeDescription}\n                          type=\"text\"\n                          id=\"description\"\n                          placeholder=\"Description\"\n                          className=\"pb-40 pt-3 px-2 rounded focus:outline-none text-gray-600 focus:text-gray-600\"\n                        />\n                      </div>\n\n                      <ImageUploader\n                        className=\"mt-5\"\n                        withIcon={true}\n                        withLabel={true}\n                        buttonText=\"Choose image\"\n                        maxFileSize={7242880}\n                        imgExtension={[\n                          \".jpg\",\n                          \".gif\",\n                          \".png\",\n                          \".gif\",\n                          \".jpeg\",\n                          \".JPEG\",\n                        ]}\n                        withPreview={true}\n                        singleImage={true}\n                        onChange={onChangeImageFile}\n                      />\n                      <div className={classes.root}>\n                        {error.sizeError ? (\n                          <>\n                            <Alert severity=\"error\">\n                              Size should be less than 5mb\n                            </Alert>\n                          </>\n                        ) : null}\n                        {error.formatError ? (\n                          <>\n                            <Alert severity=\"error\">\n                              Format should be .jpg,png,jpeg,JPEG\n                            </Alert>\n                          </>\n                        ) : null}\n                      </div>\n\n                      <div class=\"flex mt-5 flex-col text-center px-5\">\n                        <button\n                          className=\"btn btn-danger font-bold  py-2\"\n                          disabled={!validateForm()}\n                          onClick={SubmitForm}\n                        >\n                          Submit\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            {/*Form End*/}\n            {loading ? (\n              <>\n                <Loader />{\" \"}\n              </>\n            ) : null}\n          </div>\n        </div>\n\n        <Footer />\n      </div>\n    </>\n  );\n}\nexport default CreateDigitalArt;\n"]},"metadata":{},"sourceType":"module"}