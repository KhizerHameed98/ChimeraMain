{"ast":null,"code":"var _jsxFileName = \"/home/khizer/Documents/AllData/ChimeraComplete/chimeraMain/src/components/setSalePricePopUp.js\";\nimport React, { useState } from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Web3 from \"web3\";\nimport config from \"../config\";\nimport Loader from \"../partials/Loader\";\nimport Swal from \"sweetalert2\";\n\nconst chimeraContract = require(\"../contracts/Chimera.json\");\n\nconst SMAV2Contract = require(\"../contracts/ChimeraMarketAuctionV2.json\");\n\nlet web3;\nlet accounts;\nlet chimera;\nlet SMAV2;\n\nfunction DialoguePopUp(props) {\n  const [open, setOpen] = React.useState(false);\n  const [salePrice, setSalePrice] = useState(\"\");\n  const [validSalePrice, setValidSalePrice] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  function handleChangePrice(e) {\n    setValidSalePrice(false);\n    setSalePrice(e.target.value);\n  }\n\n  async function onSetSalePrice(e) {\n    setLoading(true);\n    e.preventDefault();\n\n    if (salePrice && salePrice > 0) {\n      web3 = new Web3(window.ethereum);\n      window.ethereum.enable();\n      accounts = await web3.eth.getAccounts();\n      accounts = await web3.eth.getAccounts();\n      SMAV2 = await new web3.eth.Contract(SMAV2Contract.abi, config.SMAV2);\n      const weiValue = Web3.utils.toWei(salePrice, \"ether\");\n\n      try {\n        let res = await SMAV2.methods.setSalePrice(config.Chimera, props.id, weiValue).send({\n          from: accounts[0]\n        });\n        await Swal.fire({\n          icon: \"succes\",\n          text: \"Price has been set successfully!\"\n        });\n        window.location.reload();\n      } catch (error) {\n        setLoading(false);\n        console.log(error);\n        Swal.fire({\n          icon: \"error\",\n          title: \"Oops...\",\n          text: \"Something went wrong!\"\n        });\n      }\n    } else {\n      setLoading(false);\n      setValidSalePrice(true);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: handleClickOpen,\n    style: {\n      fontSize: \"12px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, \"Set SalePrice\"), /*#__PURE__*/React.createElement(Dialog, {\n    open: open,\n    onClose: handleClose,\n    \"aria-labelledby\": \"alert-dialog-title\",\n    \"aria-describedby\": \"alert-dialog-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"alert-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, \"Set Price of your NFT here\"), /*#__PURE__*/React.createElement(DialogContent, {\n    className: \"text-center mb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"px-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"formBasicEmail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Form.Control, {\n    onChange: handleChangePrice,\n    type: \"number\",\n    placeholder: \"BNB\",\n    value: salePrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }), validSalePrice ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Form.Text, {\n    className: \"text-muted\",\n    color: \"primary\",\n    style: {\n      color: \"red\",\n      marginTop: \"5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 23\n    }\n  }, \"* The Price must be greater than 0\"))) : null), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    type: \"submit\",\n    onClick: onSetSalePrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }, \"Submit\"))), loading ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  })) : null)));\n}\n\nexport default DialoguePopUp;","map":{"version":3,"sources":["/home/khizer/Documents/AllData/ChimeraComplete/chimeraMain/src/components/setSalePricePopUp.js"],"names":["React","useState","Button","Form","Dialog","DialogContent","DialogTitle","Web3","config","Loader","Swal","chimeraContract","require","SMAV2Contract","web3","accounts","chimera","SMAV2","DialoguePopUp","props","open","setOpen","salePrice","setSalePrice","validSalePrice","setValidSalePrice","loading","setLoading","handleClickOpen","handleClose","handleChangePrice","e","target","value","onSetSalePrice","preventDefault","window","ethereum","enable","eth","getAccounts","Contract","abi","weiValue","utils","toWei","res","methods","Chimera","id","send","from","fire","icon","text","location","reload","error","console","log","title","fontSize","color","marginTop"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Web3 from \"web3\";\nimport config from \"../config\";\nimport Loader from \"../partials/Loader\";\nimport Swal from \"sweetalert2\";\nconst chimeraContract = require(\"../contracts/Chimera.json\");\nconst SMAV2Contract = require(\"../contracts/ChimeraMarketAuctionV2.json\");\n\nlet web3;\nlet accounts;\nlet chimera;\nlet SMAV2;\n\nfunction DialoguePopUp(props) {\n  const [open, setOpen] = React.useState(false);\n  const [salePrice, setSalePrice] = useState(\"\");\n  const [validSalePrice, setValidSalePrice] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  function handleChangePrice(e) {\n    setValidSalePrice(false);\n    setSalePrice(e.target.value);\n  }\n  async function onSetSalePrice(e) {\n    setLoading(true);\n    e.preventDefault();\n    if (salePrice && salePrice > 0) {\n      web3 = new Web3(window.ethereum);\n      window.ethereum.enable();\n      accounts = await web3.eth.getAccounts();\n      accounts = await web3.eth.getAccounts();\n      SMAV2 = await new web3.eth.Contract(SMAV2Contract.abi, config.SMAV2);\n      const weiValue = Web3.utils.toWei(salePrice, \"ether\");\n      try {\n        let res = await SMAV2.methods\n          .setSalePrice(config.Chimera, props.id, weiValue)\n          .send({ from: accounts[0] });\n        await Swal.fire({\n          icon: \"succes\",\n          text: \"Price has been set successfully!\",\n        });\n        window.location.reload();\n      } catch (error) {\n        setLoading(false);\n        console.log(error);\n        Swal.fire({\n          icon: \"error\",\n          title: \"Oops...\",\n          text: \"Something went wrong!\",\n        });\n      }\n    } else {\n      setLoading(false);\n      setValidSalePrice(true);\n    }\n  }\n\n  return (\n    <>\n      <button\n        className=\"btn btn-primary\"\n        onClick={handleClickOpen}\n        style={{ fontSize: \"12px\" }}\n      >\n        Set SalePrice\n      </button>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">\n          {\"Set Price of your NFT here\"}\n        </DialogTitle>\n        <DialogContent className=\"text-center mb-5\">\n          <div className=\"px-5\">\n            {/* <a\n              href=\"/create-digitalart\"\n              className=\"md:mr-5 lg:mr-5  xl:mr-5 sm:mr-0\"\n            >\n              {props.id}\n            </a> */}\n            <Form>\n              <Form.Group controlId=\"formBasicEmail\">\n                <Form.Label></Form.Label>\n                <Form.Control\n                  onChange={handleChangePrice}\n                  type=\"number\"\n                  placeholder=\"BNB\"\n                  value={salePrice}\n                />\n\n                {validSalePrice ? (\n                  <>\n                    <Form.Text\n                      className=\"text-muted\"\n                      color=\"primary\"\n                      style={{ color: \"red\", marginTop: \"5px\" }}\n                    >\n                      <span style={{ color: \"red\" }}>\n                        * The Price must be greater than 0\n                      </span>\n                    </Form.Text>\n                  </>\n                ) : null}\n              </Form.Group>\n\n              <Button variant=\"primary\" type=\"submit\" onClick={onSetSalePrice}>\n                Submit\n              </Button>\n            </Form>\n          </div>\n          {loading ? (\n            <>\n              <Loader />\n            </>\n          ) : null}\n          {/* <Loader /> */}\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\nexport default DialoguePopUp;\n"]},"metadata":{},"sourceType":"module"}